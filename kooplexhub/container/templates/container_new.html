{% extends 'container_layout.html' %}

{% load static %}
{% load extras %}

{% block chardinhelp %}
         url: "{% static 'chardinjs/help_new_environment.json' %}"
{% endblock %}


{% block realcontent %}
<div class="container mt-2">
  <form id="service_new" class="form-horizontal was-validated" action="{% url 'container:new' %}" method="post">
  {% csrf_token %}
  {% title "Set the details of your new environment" %}
  <div class="card bg-light border-secondary shadow p-3">
    <div class="container-fluid d-flex flex-row">
      <div class="d-flex">
        <table>
          {{ form.as_table }}
        </table>
      </div>
      <div class="d-flex ms-3">
        <p class="fw-bolder">Image description:</p>
	{# fixme: seems line is not broken #}
	<p id="imageDescription"></p>
	{{ form.descriptions }}
      </div>
    </div>
    {% apply_cancel hide_cancel=True label_apply='Create' %}
  </div>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
$("select[name='image'").change(function() {
    $( "select option:selected" ).each(function() {
        var id = $(this).attr("value");
        console.log( $( this ).text() + " -> " + id);
	if (id === undefined) {
	    $("#imageDescription").text("");
	} else {
	    var description = $("#image-description-" + id).attr("value");
	    $("#imageDescription").text(description);
	}
    });
}).change();
</script>
{% endblock %}
