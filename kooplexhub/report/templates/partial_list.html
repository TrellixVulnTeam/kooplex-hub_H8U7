{% load report_buttons %}
{% load container_buttons %}

<div class="card bg-light border-secondary shadow m-1" id="report-id-{{ report.id }}">
  <input type="hidden" id="r-{{report.id}}" value="{{ report.name }}">
  <div class="card-header bg-body d-flex flex-row">
    <div>
      {% button_report_open report %}
    </div>
    <div>
      <h4 class="ms-2">{{ report.name }}</h4>
    </div>
  </div>
  <div class="card card-body p-1 mt-2 mb-2">
  {% if user.is_authenticated %}
    <p class="card-text"><strong>Project:</strong>&nbsp;{{ report.project }}</p>
    <p class="card-text"><strong>Scope:</strong>&nbsp;{% r_scope report %}</p>
    {% if report.image %}
      <p class="card-text"><strong>Image:</strong>&nbsp;{% container_image report.image %}</p>
    {% else %}
      <p class="card-text"><strong>Static html report</strong></p>
    {% endif %}
  {% endif %}
  {% if report.creator == user %}
    <p class="card-text"><strong>Source folder:</strong> {{ report.project.subpath }}/{{ report.folder }}</p>
  {% else %}
    <p class="card-text"><strong>Creator:</strong> {{ report.creator.profile.name_and_username }}</p>
  {% endif %}
    <p class="card-text"><strong>Description:</strong> {{ report.description }}</p>
    <p class="card-text">
      <div class="btn-group" role="group">
        {% include 'reports_button.html' %} {# fixme: be it a template tag #}
      </div>
    </p>
  </div>
  <div class="card card-footer d-flex flex-row justify-content-between mb-2">
    <div class="">
      {% button_report_conf report user %}
    </div>
    <div class="">
      {% button_report_delete report user %}
    </div>
  </div>
</div>
