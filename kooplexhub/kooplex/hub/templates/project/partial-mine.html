{% load custom_tags %}
{% include 'project/settings.html' %}

{% if project in running  %}

<div class="panel panel-success" style="margin-bottom: 3px">
  <div class="panel-heading" style="padding: 5px 5px;">
    <div class="row">
      <div class="col-md-1 col-sm-2">
        <a href="{% url 'container-open' %}?project_id={{ project.id }}&pane=project_mine" target="_blank">
          <button role="button" type="button" class="btn btn-success" style="padding: 3px 6px 6px 6px">
            <span class="glyphicon glyphicon-folder-open" aria-hidden="true"> Open</span>
          </button>
        </a>
      </div>
      <a data-toggle="collapse"  href="#collapse{{ project.id }}" style="text-decoration: none; color: gray">
        <div class="col-md-11 col-sm-10" style="padding: 0px 30px 0px 30px;">
          {% include 'project/containerstatus.html' %}
          <strong data-toggle="tooltip" title="Running" data-placement="bottom">{{ project.name }}</strong>
          {% if project.owner != user %} ( owned by {{ project.owner }} ) {% endif %}
          <span class="badge" style="float: right;"> Using image:<strong>{{ project.image }}</strong></span>
        </div>
      </a>
    </div>
  </div>

{% else %}  <!-- if project in running // -->

<div class="panel panel-default" style="margin-bottom: 3px">
  <div class="panel-heading" style="padding: 5px 5px;">
    <div class="row">
      <div class="col-md-1 col-sm-2">
      <a href="{% url 'container-start' %}?project_id={{ project.id }}&pane=project_mine">
        <button role="button" type="button" class="btn btn-default" style="padding: 3px 6px 6px 6px">
          <span class="glyphicon glyphicon-play" aria-hidden="true"> Start</span>
        </button>
      </a>
    </div>
    <a data-toggle="collapse"  href="#collapse{{ project.id }}" style="text-decoration: none; color: gray">
      <div class="col-md-11 col-sm-10" style="padding: 0px 30px 0px 30px;">
       {% include 'project/containerstatus.html' %}
        <strong>{{ project.name }}</strong>
        {% if project.owner != user %} ( owned by {{ project.owner }} ) {% endif %}
        <span class="badge" style="float: right;"> Using image:<strong>{{ project.image }}</strong></span>
      </div>
    </a>
  </div>
</div>

{% endif %} <!-- if project in running // -->

<div id="collapse{{ project.id }}" class="panel-collapse collapse">
  <div class="panel-body">
    <div class=" col-md-7 col-sm-7 col-xs-7">{{ project.description }}</div>
      <!-- CONTAINER MANAGEMENT -->
      <div class=" col-md-5 col-sm-5 col-xs-5">

      {% if project in running  %}

        <a href="{% url 'container-delete' %}?project_id={{ project.id }}&pane=project_mine">
          <button role="button" type="button" class="btn btn-danger" data-toggle="tooltip" title="Stop project container {{ project.name }}" data-placement="top">
            <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
          </button></a>
        <a href="{% url 'container-open' %}?project_id={{ project.id }}" target="_blank">
          <button role="button" type="button" class="btn btn-success" data-toggle="tooltip" title="Open project container: {{ project.name }}" data-placement="top">
            <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
          </button></a>
        <a href="{% url 'notebook-publishform' %}?project_id={{ project.id  }}">
          <button role="button" type="button" class="btn btn-warning" data-toggle="tooltip" title="Publish project: {{ project.name }}" data-placement="top">
            <span class="glyphicon glyphicon-flag" aria-hidden="true"></span>
          </button></a>

      {% else %}  <!-- if project in running // -->

        <a href="{% url 'container-start' %}?project_id={{ project.id }}&pane=project_mine">
          <button role="button" type="button" class="btn btn-success" data-toggle="tooltip" title="Start project container {{ project.name }}" data-placement="top">
            <span class="glyphicon glyphicon-play" aria-hidden="true"></span>
          </button></a>
        <a href="#">
          <button role="button" type="button" class="btn btn-default" data-toggle="tooltip" title="Start project container {{ project.name }} to enable this button" data-placement="top">
            <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
          </button></a>
        <a href="#">
          <button role="button" type="button" class="btn btn-default" data-toggle="tooltip" title="Start project container {{ project.name }} to enable this button" data-placement="top">
            <span class="glyphicon glyphicon-flag" aria-hidden="true"></span>
          </button></a>

      {% endif %}  <!-- if project in running // -->

        <!-- REVISION CONTROL -->
        <a href="{% url 'project-versioncontrol' %}?project_id={{ project.id }}">
          <button role="button" type="button" class="btn btn-warning" data-toggle="tooltip" title="Version control of your project {{ project.name }}. You can commit your changes, revert to a former commited state or pull remote changes" data-placement="top">
            <span class="glyphicon glyphicon-random" aria-hidden="true"></span>
          </button></a>
        <!-- SETTINGS -->
        <a href="#" data-toggle="modal" data-target="#project-settings-{{ project.id  }}">
          <button role="button" type="button" class="btn btn-info" data-toggle="tooltip" title="Settings of project {{ project.name }}. You can manage collaboration. You can change the image, modify volume attachments or delete the project here." data-placement="top">
            <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
          </button></a>
      </div>  <!-- col 5 //-->
    </div>    <!-- panel-body //-->
  </div>      <!-- collapse //-->
</div>        <!-- panel //-->
