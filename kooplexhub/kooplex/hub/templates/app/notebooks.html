{% extends "app/layout.html" %}


{% block content %}

<!-- <h2>Image creation</h2>-->



{% if username %}
<div class="new-project">
{% include 'app/notebooks-new-partial.html' with myprojects=True %}
<button type="button" class="btn btn-default" data-toggle="modal" data-target="#project-new">Start new project &raquo;</button>
{%  if errors %}
<script>
$(document).ready(function () {

    $('#project-new').modal('show');

});
</script>
    {% endif %}
</div>

{% endif %}




{% comment %} Nem vilagos, hogy hova krealodnak. Majd le sz a projektekhez kulon try gomb...
{% endcomment %}

<div class="container">  
 <ul class="nav nav-tabs">    
 {% if username %}

 <li class="active"><a data-toggle="tab" href="#running">Running containers</a></li>
 <li><a data-toggle="tab" href="#myprojects">My projects</a></li>
  {% endif %}
 <li><a data-toggle="tab" href="#otherprojects">Other public projects</a></li>

<!--
{% if username %}
  <li><a data-toggle="tab" href="#menu3">Create New Image</a></li>    
 {% endif %}
-->

 </ul>  
 <div class="tab-content">    

  {% if username %}

  <div id="running" class="tab-pane fade in active ">
      <div class="page-header">
        <h2>My running containers <small>with jupyter notebooks</small></h2>
      </div>
      <div class=" col-md-6 col-sm-6 col-xs-12">

        {% for item in notebooks %}
            <div class="panel panel-default ">

               <div class="panel-heading">
                        {{ item.name }}
               </div>
                <div class="panel-body">
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        {% if item.is_stopped %}
                        <a href="{% url 'container-start' %}?notebook_id={{ item.id }}&session_id={{ item.id }}" class="btn btn-success" role="button">
                        <span class="glyphicon glyphicon-play" aria-hidden="true"></span> Start</a>
                        {%  else %}
                            <a href="{% url 'container-stop' %}?notebook_id={{ item.id }}&session_id={{ item.id }}" class="btn btn-warning" role="button">
                            <span class="glyphicon glyphicon-stop" aria-hidden="true"></span> Stop</a>
                        {% endif %}

                        <a href="{% url 'container-delete' %}?notebook_id={{ item.id }}&session_id={{ item.id }}" class="btn btn-danger" role="button">
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete</span></a>

                        {% for session in sessions %}
                        {%  if session.container_name == item.name %}
                            {% if item.is_stopped %}
                                <a href="#" class="btn btn-default" role="button">
                                <span class="glyphicon glyphicon-tree-conifer" aria-hidden="true"></span> Container stopped</a>
                            {% else %}
                                <a href="{{ session.external_url }}" target="_blank" class="btn btn-info" role="button">
                                <span class="glyphicon glyphicon-record" aria-hidden="true"></span> Open</a>
                            {% endif %}

                            <a role="button" href="{% url 'notebooks-prepare-to-convert-html' %}?notebook_path={{ session.notebook_path }}&notebook_id={{ item.id }}&project_owner={{ item.project_owner }}&project_name={{ item.project_name }}&project_id={{ session.project_id  }}&container_name={{ session.container_name }}">
                            <button role="button" type="button" class="btn btn-default">Deploy</button></a>

                        {% endif %}
                        {% endfor %}
                    </div>
                </div>
                </div>
                </div>

      {% endfor %}
        </div>

 </div>
 
 <div id="myprojects" class="tab-pane fade projects">
    <div class="page-header">
        <h2>My projects </h2>
    </div>
    {% for item in projects %}
        {% include 'app/project-partial.html'  %}
    {% endfor %}
 </div>

  {% endif %}
 

 <div id="otherprojects" class="tab-pane fade projects ">
   <div class="page-header">
        <h2>Public projects </h2>
    </div>
     {% for item in public_projects %}
    {% if item.owner.username != username %}
        {% include 'app/project-partial.html' with publicvar=True %}
    {% endif %}
    {% endfor %}
    </div>

 <!--
  {% if username %}
 <div id="menu3" class="tab-pane fade projects public"> 

 <h2> Create new image </h2>
 Upload file ....
 </div>
 {% endif %}
-->

 </div>
</div>

{% endblock %}
