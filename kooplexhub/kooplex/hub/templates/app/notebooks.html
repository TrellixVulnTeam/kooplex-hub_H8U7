{% extends "app/layout.html" %}

{% block content %}
<!-- <h2>Image creation</h2>-->
{% include 'app/notebooks-new-partial.html' %}

<p><button type="button" class="btn btn-default" data-toggle="modal" data-target="#project-new">Start new project &raquo;</button></p>

<h2>My running containers</h2>
{% for item in notebooks %}
    <p>Container: <b>{{ item.name }}</b></p>
   <p>{% if item.is_stopped %}
            <a href="{% url 'container-start' %}?notebook_id={{ item.id }}&session_id={{ item.id }}"><span class="button start">Start</span></a>
       {%  else %}
            <a href="{% url 'container-stop' %}?notebook_id={{ item.id }}&session_id={{ item.id }}"><span class="button stop">Stop</span></a>
       {% endif %}
       <a href="{% url 'container-delete' %}?notebook_id={{ item.id }}&session_id={{ item.id }}"><span class="button delete">Delete</span></a>
   </p>
{% endfor %}

{% for item in sessions %}
<div class="project running">
    <p><b>{{ item.notebook_path }}</b></p>
    
    {% if notebook_dir_name in item.notebook_path %}
<p>        <a href="{{ item.external_url }}" target="_blank"><span class="button open">open</span></a><p>
    {% else %}
        <a href="{{ item.external_url }}" target="_blank">open </a>
        {% if item.is_forked %}
            | <a href="{% url 'notebooks-commit' %}?notebook_path_dir={{ item.notebook_path }}&is_forked={{ item.is_forked }}&project_id={{ item.project_id }}&target_id={{ item.target_id }}">
            commit and create merge request</a>
        {% else %}
            | <a href="{% url 'notebooks-commit' %}?notebook_path_dir={{ item.notebook_path }}&is_forked={{ item.is_forked }}">
            commit</a>
        {% endif %}
    {% endif %}
        <!-- | <a href="{% url 'notebooks-shutdown' %}?session_id={{ item.id }}">shut down</a> -->
    </p>
    </div>
{% endfor %}

{% comment %} Nem vilagos, hogy hova krealodnak. Majd le sz a projektekhez kulon try gomb...
{% endcomment %}
<h2>Start new project</h2>

{% include 'app/notebooks-new-partial.html' %}

<p><button type="button" class="btn btn-default" data-toggle="modal" data-target="#project-new">Start new project &raquo;</button></p>


<h2>User's projects</h2>
{% for item in projects %}
    {% include 'app/project-partial.html'  %}
{% endfor %}

<h2>Other public projects</h2>
{% for item in public_projects %}
    {% if item.owner.username != username %}
        {% include 'app/project-partial.html' with publicvar=True %}
    {% endif %}
{% endfor %}

{% endblock %}
