<!--<div style="display:inline; width:128px; height:128px">
    {% if item.avatar_url %}
    <img src="{{ item.avatar_url }}" style="width:128px; height:128px" />
    {% endif %}
</div> -->

<div class="session">
    <div class="session-details"><p>

        <b>{{ item.name }} {% if item.owner.username != username %} ( owned by {{ item.owner.username }} ) {%  endif  %}</b>
        {% if 'forked_from_project' in item %}
            : forked from
            <a href="{{ base_url }}/gitlab/{{ item.forked_from_project.path_with_namespace }}" target="_blank">
                {{ item.forked_from_project.path_with_namespace }}
            </a>
        {% endif %}
    </p>
    <p>{{ item.description }}</p>
    </div>
    <div class="session-buttons">
    <!--<span class="readmore"><button>More</button></span>-->
    <span class="session-button">
          {% comment %}
    {% if 'notebook' in item.variables %}
    {% endcomment %}
            {% if not publicvar %}
        {% include 'app/notebooks-repo-pull-really.html' %}

        <button type="button" class="btn btn-default" data-toggle="modal" data-target="#repo-pull-{{ item.name }}">Revert</button>

     <!-- <a href="{% url 'notebooks-pull-confirm' %}?project_id={{ item.id }}&project_owner={{ item.owner.username }}&project_name={{ item.name }}&repo={{ item.path_with_namespace }}{% if 'forked_from_project' in item %}&is_forked=True&project_id={{ item.id }}&target_id={{ item.forked_from_project.id }}{% else %}&is_forked=False{% endif %}">
        <span class="button pull">pull</span></a> -->
        
    <a href="{% url 'notebooks-open' %}?project_id={{ item.id }}&project_owner={{ item.owner.username }}&project_name={{ item.name }}&repo={{ item.path_with_namespace }}{% if 'forked_from_project' in item %}&is_forked=True&project_id={{ item.id }}&target_id={{ item.forked_from_project.id }}{% else %}&is_forked=False{% endif %}">
        <span class="button start">Start</span></a>

    <a href="{% url 'notebooks-commit' %}?project_owner={{ item.owner.username }}&project_name={{ item.name }}&notebook_path_dir={{ item.notebook_path }}&is_forked={{ item.is_forked }}" target="_blank">
        <span class="button commit">Commit</span></a>
   <a href="{% url 'notebooks-deploy' %}?project_owner={{ item.owner.username }}&project_name={{ item.name }}&project_id={{ item.id }}">
        <span class="button commit">Deploy</span></a>
    {% endif %}
    {% comment %}
    {% endif %}
    {% endcomment %}

    {% if 'worksheet' in item.variables %}
     <a><span class="button view">view</span></a>

    {% endif %}

    <!-- | view in <a href="{{ base_url }}/gitlab/{{ item.path_with_namespace }}" target="_blank">Gitlab</a> -->

    {%  if publicvar %}
        {% if item.forkable %}
            <a href="{% url 'project-fork' %}?itemid={{ item.id }}" target="_blank"><span class="button commit">Fork it</span> </a>
        {% else %}
            | it has been forked
        {% endif %}
    {%  endif %}
    </span>
    {%  if not publicvar and item.forks_count > 0 %}
    <p>
        See the opened <a href="{% url 'notebooks-mergerequestlist' %}?itemid={{ item.id }}&path_with_namespace={{ item.path_with_namespace }}" target="_blank">merge requests</a>
    </p>
    {% endif %}
    </div>
    <div class="session-container">
    image: <strong> 
    {% if 'container_image' in item.variables %}
        {{ item.variables.container_image }}
    {% endif %}
    </strong>
            {% if not publicvar %}
    {% include 'app/notebooks-change-image.html' %}
    <button type="button" class="btn btn-default" data-toggle="modal"  data-target="#change-image-{{ item.name  }}">Change</button>
    {% include 'app/notebooks-delete-project.html' %}
    <button type="button" class="btn btn-default" data-toggle="modal"  data-target="#delete-project-{{ item.name }}">Delete project</button>
    {% endif %}

    </div>


</div>
