{% extends "project_layout.html" %}

{% load static %}

{% block chardinhelp %}
         url: "{% static 'chardinjs/listproject.json' %}"
{% endblock %}


{% block realcontent %}
{% if userprojectbindinglist|length %}
  <input class="form-control me-2 mb-3 mt-3" type="text" id="search_project" placeholder="Search project" title="Type in a name" data-intro="#search_project">
  <div id="projectListPane" data-intro="#project_list">
    {% for upb in userprojectbindinglist %}
    {% include 'project_partial_list.html' with next_page='project:list' project=upb.project projectcontainerbindings=upb.projectcontainerbindings is_admin=upb.is_admin %}
    {% endfor %}
  </div>
{% else %}
  <p>You have not created any projects yet. 
    <a href="{% url 'project:new' %}"><i class="bi bi-bag-plus"></i><span>&nbsp;Create one now...</span></a>
  </p>
{% endif %}
{% endblock %}

{% block scripts %}
<script>  
$("#search_project").keyup(function() {
  var pattern = $( this ).val().toUpperCase();
  console.log( "search: " + pattern );
  $("span[id^='project-name-'").each(function() {
    var projectid = $( this ).attr('id').split('-')[2];
    var hide_it = true;
    var card = $("#card-" + projectid);
    if (pattern.length > 0) {
      var name = $( this ).html().toUpperCase();
      if ( name.indexOf(pattern) > -1 ) {
        hide_it = false;
      }
    } else {
      hide_it = false;
    }
    if (hide_it) {
      $( card ).hide();
    } else {
      $( card ).show();
    }
  });
});
</script>
{% endblock %}
