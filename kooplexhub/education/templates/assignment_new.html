{% extends "assignment.html" %}

{% load render_table from django_tables2 %}
{% load extras %}

{% block assignment_content %}
<div class="tab-pane fade {% if active == "new" %}show active{% endif %}" id="newAssignment" role="tabpanel" aria-labelledby="tab-new">
  <div class="card shadow mt-3 p-3 mb-2 bg-light rounded">
    {% if f_assignment|length > 0 %}
    <form id="assignments-form-new" class="form-horizontal" action="{% url 'education:newassignment' %}" method="post">
      {% csrf_token %}
      <input type="hidden" name="course_id" id="course_id" value="">
      <table>
        <thead>
          <tr>
            <th><label class="mt-2" for="course_selected">Selected course: </label></th>
            <td>
              <select id="course_selected" name="course_selected" class="form-select" style="width: 100%">
                {% for f in f_assignment %}
                  {% if f.okay %}
                  <option value="{{ f.course.id }}">{{ f.course }}</option>
                  {% endif %}
                {% endfor %}
              </select>
            </td>
          </tr>
        </thead>
        {% for f in f_assignment %}
          {% if f.okay %}
          <tbody style="display: none" id="newAssignmentForm-{{ f.course.id }}">
              {{ f.as_table }}
          </tbody>
          {% endif %}
        {% endfor %}
      </table>
      {% include 'apply_cancel.html' with hide_cancel=True %}
    </form>
    {% else %}
      {% include 'empty.html' with empty_body='There are no candidate subfolders in <code>assignment_prepare</code> directory. Please create one and place all files into it to be part of a new assignment. Empty folders cannot be selected.' skip_border=True %}
    {% endif %}
  </div>
</div>
{% endblock %}
