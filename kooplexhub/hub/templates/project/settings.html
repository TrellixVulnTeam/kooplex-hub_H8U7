{% extends "layout.html" %}
{% load render_table from django_tables2 %}

{% block content %}

<!-- FIXME: active like assignments -->

<form id="projectSettingsForm" class="form-horizontal" action="{% url 'project:configure' project.id next_page %}" method="post">
  {% csrf_token %}
  <h5 class="modal-title">Configure project {{ project.name }}</h5>
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item"><a class="nav-link active" href="#pane_description-{{ project.id }}" data-toggle="tab">Description</a></li>
    {% if project|is_admin:user %}
    <li class="nav-item"><a class="nav-link" href="#pane_collaboration-{{ project.id }}" data-toggle="tab">Collaboration</a></li>
    <li class="nav-item"><a class="nav-link" href="#pane_image-{{ project.id }}" data-toggle="tab">Image</a></li>
    <li class="nav-item"><a class="nav-link" href="#pane_volume-{{ project.id }}" data-toggle="tab">Volumes</a></li>
    <li class="nav-item"><a class="nav-link" href="#pane_scope-{{ project.id }}" data-toggle="tab">Scope</a></li>
    {% endif %}
  </ul>
  <div class="tab-content">
    <div id="pane_description-{{ project.id }}" class="tab-pane fade show active">
      {% include 'project/pane-description.html' %}
    </div>
    {% if project|is_admin:user %}
    <div id="pane_collaboration-{{ project.id }}" class="tab-pane fade">
      <p>Manage your collaboration.</p>
      {% render_table t_collaborators %}
    </div>
    <div id="pane_image-{{ project.id }}" class="tab-pane fade">
      {% include 'project/pane-image.html' %}
    </div>
    <div id="pane_volume-{{ project.id }}" class="tab-pane fade">
      <p>Functional volumes</p>
      {% render_table t_volumes_fun %}
      <p>Storage volumes</p>
      {% render_table t_volumes_stg %}
    </div>
    <div id="pane_scope-{{ project.id }}" class="tab-pane fade">
      {% include 'project/pane-scope.html' %}
    </div>
    {% endif %}
  </div>   <!-- tab-content -->
  <div class="modal-footer">
    <button type="submit" class="btn btn-default" name="button" value="apply"> Apply settings</button>
    <button class="btn btn-default" data-dismiss="modal">Cancel</button>
  </div>
</form>
{% endblock %}
