<div class="col">
  <div class="card border-success shadow">
    <div class="card-header bg-secondary text-dark">
      <strong>{{ report.name }}</strong>
      {% if report.service.state == report.service.ST_RUNNING %}
        <div class="float-end">
          <a href="{% url 'report:openreport' report.id %}" target="_blank" role="button" class="btn btn-dark btn-sm"><span class="oi oi-external-link" aria-hidden="true"></span></a>
        </div>
      {% endif %}
    </div>
    <div class="card-body">
      <p class="card-text">{{ report.description }}</p>
    </div>
    <div class="card-footer bg-secondary text-dark">
      <div class="float-end">
        <button class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#modal-{{ report.id }}" aria-expanded="true" aria-controls="modal-{{ report.id }}"><span class="oi oi-pencil"></span></button>
	{% if report|authorize:user %}
          <a href="{% url 'report:refresh' report.id %}" role="button" class="btn btn-light btn-sm"><span class="oi oi-reload" aria-hidden="true"></span></a>
	{% endif %}
	{% if report.creator == user %}
          <a href="{% url 'report:deletereport' report.id %}" role="button" class="btn btn-danger btn-sm"><span class="oi oi-trash" aria-hidden="true"></span></a>
	{% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="modal-{{ report.id }}" data-bs-keyboard="false" tabindex="-1" aria-labelledby="heading-{{ report.id }}" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="heading-{{ report.id }}">{{ report.name }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p><strong>Creator:</strong> {{ report.creator.profile.name_and_username }}</p>
        <p><strong>Description: </strong>{{ report.description }}</p>
	{% if user.is_authenticated %}
	<p><strong>Project (folder/index): </strong>{{ report.project.name }} ({{ report.folder }}/{{ report.index }})</p>
	{% endif %}
        <p><strong>Url: </strong><code>{{ report.url_external }}</code></p>
      </div>
      <div class="modal-footer">
        {% include 'apply_cancel.html' with modal=True hide_apply=True cancel="Ok" %}
      </div>
    </div>
  </div>
</div>

